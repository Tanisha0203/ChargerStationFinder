{"ast":null,"code":"import _regenerator from \"C:/Users/HARSH/Desktop/code/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/HARSH/Desktop/code/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.math.log2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { LMap, LTileLayer, LMarker, LPopup } from '@vue-leaflet/vue-leaflet';\nimport 'leaflet/dist/leaflet.css';\nexport default {\n  name: 'Map',\n  components: {\n    LMap: LMap,\n    LTileLayer: LTileLayer,\n    LMarker: LMarker,\n    LPopup: LPopup\n  },\n  setup: function setup() {\n    var store = useStore();\n    var zoom = ref(2);\n    var center = ref([0, 0]);\n    var chargers = computed(function () {\n      return store.getters.getChargers;\n    });\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var bounds, latDiff, lngDiff, maxDiff;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return store.dispatch('fetchChargers');\n          case 1:\n            if (chargers.value && chargers.value.length > 0) {\n              bounds = chargers.value.reduce(function (acc, charger) {\n                return [Math.min(acc[0], charger.location.latitude), Math.min(acc[1], charger.location.longitude), Math.max(acc[2], charger.location.latitude), Math.max(acc[3], charger.location.longitude)];\n              }, [90, 180, -90, -180]);\n              center.value = [(bounds[0] + bounds[2]) / 2, (bounds[1] + bounds[3]) / 2];\n              latDiff = bounds[2] - bounds[0];\n              lngDiff = bounds[3] - bounds[1];\n              maxDiff = Math.max(latDiff, lngDiff);\n              if (maxDiff > 0) {\n                zoom.value = Math.floor(Math.log2(360 / maxDiff));\n              }\n            }\n          case 2:\n            return _context.a(2);\n        }\n      }, _callee);\n    })));\n    return {\n      chargers: chargers,\n      zoom: zoom,\n      center: center\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useStore","LMap","LTileLayer","LMarker","LPopup","name","components","setup","store","zoom","center","chargers","getters","getChargers","_asyncToGenerator","_regenerator","m","_callee","bounds","latDiff","lngDiff","maxDiff","w","_context","n","dispatch","value","length","reduce","acc","charger","Math","min","location","latitude","longitude","max","floor","log2","a"],"sources":["C:\\Users\\HARSH\\Desktop\\code\\frontend\\src\\views\\Map.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-container\">\r\n    <l-map\r\n      :zoom=\"zoom\"\r\n      :center=\"center\"\r\n      :use-global-leaflet=\"false\"\r\n    >\r\n      <l-tile-layer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        layer-type=\"base\"\r\n        name=\"OpenStreetMap\"\r\n      />\r\n      <l-marker\r\n        v-for=\"charger in chargers\"\r\n        :key=\"charger._id\"\r\n        :lat-lng=\"[charger.location.latitude, charger.location.longitude]\"\r\n      >\r\n        <l-popup>\r\n          <div>\r\n            <h3>{{ charger.name }}</h3>\r\n            <p><strong>Status:</strong> {{ charger.status }}</p>\r\n            <p><strong>Power Output:</strong> {{ charger.powerOutput }} kW</p>\r\n            <p><strong>Connector Type:</strong> {{ charger.connectorType }}</p>\r\n          </div>\r\n        </l-popup>\r\n      </l-marker>\r\n    </l-map>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { LMap, LTileLayer, LMarker, LPopup } from '@vue-leaflet/vue-leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\n\r\nexport default {\r\n  name: 'Map',\r\n  components: {\r\n    LMap,\r\n    LTileLayer,\r\n    LMarker,\r\n    LPopup\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const zoom = ref(2)\r\n    const center = ref([0, 0])\r\n    \r\n    const chargers = computed(() => store.getters.getChargers)\r\n\r\n    onMounted(async () => {\r\n      await store.dispatch('fetchChargers')\r\n      \r\n      if (chargers.value && chargers.value.length > 0) {\r\n        const bounds = chargers.value.reduce((acc, charger) => {\r\n          return [\r\n            Math.min(acc[0], charger.location.latitude),\r\n            Math.min(acc[1], charger.location.longitude),\r\n            Math.max(acc[2], charger.location.latitude),\r\n            Math.max(acc[3], charger.location.longitude)\r\n          ]\r\n        }, [90, 180, -90, -180])\r\n        \r\n        center.value = [\r\n          (bounds[0] + bounds[2]) / 2,\r\n          (bounds[1] + bounds[3]) / 2\r\n        ]\r\n        \r\n        const latDiff = bounds[2] - bounds[0]\r\n        const lngDiff = bounds[3] - bounds[1]\r\n        const maxDiff = Math.max(latDiff, lngDiff)\r\n        \r\n        if (maxDiff > 0) {\r\n          zoom.value = Math.floor(Math.log2(360 / maxDiff))\r\n        }\r\n      }\r\n    })\r\n\r\n    return {\r\n      chargers,\r\n      zoom,\r\n      center\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.map-container {\r\n  height: calc(100vh - 64px);\r\n  width: 100%;\r\n}\r\n</style> "],"mappings":";;;;;;;AA+BA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAI;AAC7C,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,IAAI,EAAEC,UAAU,EAAEC,OAAO,EAAEC,MAAK,QAAS,0BAAyB;AAC3E,OAAO,0BAAyB;AAEhC,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVL,IAAI,EAAJA,IAAI;IACJC,UAAU,EAAVA,UAAU;IACVC,OAAO,EAAPA,OAAO;IACPC,MAAK,EAALA;EACF,CAAC;EACDG,KAAK,WAALA,KAAKA,CAAA,EAAG;IACN,IAAMC,KAAI,GAAIR,QAAQ,CAAC;IACvB,IAAMS,IAAG,GAAIZ,GAAG,CAAC,CAAC;IAClB,IAAMa,MAAK,GAAIb,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAEzB,IAAMc,QAAO,GAAIZ,QAAQ,CAAC;MAAA,OAAMS,KAAK,CAACI,OAAO,CAACC,WAAW;IAAA;IAEzDf,SAAS,cAAAgB,iBAAA,cAAAC,YAAA,GAAAC,CAAA,CAAC,SAAAC,QAAA;MAAA,IAAAC,MAAA,EAAAC,OAAA,EAAAC,OAAA,EAAAC,OAAA;MAAA,OAAAN,YAAA,GAAAO,CAAA,WAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,CAAA;UAAA;YAAAD,QAAA,CAAAC,CAAA;YAAA,OACFhB,KAAK,CAACiB,QAAQ,CAAC,eAAe;UAAA;YAEpC,IAAId,QAAQ,CAACe,KAAI,IAAKf,QAAQ,CAACe,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;cACzCT,MAAK,GAAIP,QAAQ,CAACe,KAAK,CAACE,MAAM,CAAC,UAACC,GAAG,EAAEC,OAAO,EAAK;gBACrD,OAAO,CACLC,IAAI,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC,CAAC,EAAEC,OAAO,CAACG,QAAQ,CAACC,QAAQ,CAAC,EAC3CH,IAAI,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC,CAAC,EAAEC,OAAO,CAACG,QAAQ,CAACE,SAAS,CAAC,EAC5CJ,IAAI,CAACK,GAAG,CAACP,GAAG,CAAC,CAAC,CAAC,EAAEC,OAAO,CAACG,QAAQ,CAACC,QAAQ,CAAC,EAC3CH,IAAI,CAACK,GAAG,CAACP,GAAG,CAAC,CAAC,CAAC,EAAEC,OAAO,CAACG,QAAQ,CAACE,SAAS,EAC7C;cACF,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;cAEvBzB,MAAM,CAACgB,KAAI,GAAI,CACb,CAACR,MAAM,CAAC,CAAC,IAAIA,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,EAC3B,CAACA,MAAM,CAAC,CAAC,IAAIA,MAAM,CAAC,CAAC,CAAC,IAAI,EAC5B;cAEMC,OAAM,GAAID,MAAM,CAAC,CAAC,IAAIA,MAAM,CAAC,CAAC;cAC9BE,OAAM,GAAIF,MAAM,CAAC,CAAC,IAAIA,MAAM,CAAC,CAAC;cAC9BG,OAAM,GAAIU,IAAI,CAACK,GAAG,CAACjB,OAAO,EAAEC,OAAO;cAEzC,IAAIC,OAAM,GAAI,CAAC,EAAE;gBACfZ,IAAI,CAACiB,KAAI,GAAIK,IAAI,CAACM,KAAK,CAACN,IAAI,CAACO,IAAI,CAAC,GAAE,GAAIjB,OAAO,CAAC;cAClD;YACF;UAAA;YAAA,OAAAE,QAAA,CAAAgB,CAAA;QAAA;MAAA,GAAAtB,OAAA;IAAA,CACD;IAED,OAAO;MACLN,QAAQ,EAARA,QAAQ;MACRF,IAAI,EAAJA,IAAI;MACJC,MAAK,EAALA;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}