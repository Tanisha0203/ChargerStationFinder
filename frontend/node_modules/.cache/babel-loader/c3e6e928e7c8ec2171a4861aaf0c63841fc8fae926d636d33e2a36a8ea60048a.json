{"ast":null,"code":"import _regenerator from \"C:/Users/HARSH/Desktop/code/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/HARSH/Desktop/code/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix Leaflet default icon issue\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nexport default {\n  name: 'Map',\n  setup: function setup() {\n    var store = useStore();\n    var mapContainer = ref(null);\n    var map = ref(null);\n    var markers = ref([]);\n    var chargers = computed(function () {\n      return store.getters.getChargers;\n    });\n    var initMap = function initMap() {\n      if (!mapContainer.value) return;\n\n      // Initialize map\n      map.value = L.map(mapContainer.value).setView([0, 0], 2);\n\n      // Add tile layer\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(map.value);\n\n      // Add markers for each charger\n      markers.value = chargers.value.map(function (charger) {\n        var marker = L.marker([charger.location.latitude, charger.location.longitude]).addTo(map.value).bindPopup(\"\\n            <h3>\".concat(charger.name, \"</h3>\\n            <p><strong>Status:</strong> \").concat(charger.status, \"</p>\\n            <p><strong>Power Output:</strong> \").concat(charger.powerOutput, \" kW</p>\\n            <p><strong>Connector Type:</strong> \").concat(charger.connectorType, \"</p>\\n          \"));\n        return marker;\n      });\n\n      // Fit map bounds to show all markers\n      if (markers.value.length > 0) {\n        var group = new L.featureGroup(markers.value);\n        map.value.fitBounds(group.getBounds().pad(0.1));\n      }\n    };\n    onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return store.dispatch('fetchChargers');\n          case 1:\n            initMap();\n          case 2:\n            return _context.a(2);\n        }\n      }, _callee);\n    })));\n    onUnmounted(function () {\n      if (map.value) {\n        map.value.remove();\n      }\n    });\n    return {\n      mapContainer: mapContainer\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","useStore","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","name","setup","store","mapContainer","map","markers","chargers","getters","getChargers","initMap","value","setView","tileLayer","attribution","addTo","charger","marker","location","latitude","longitude","bindPopup","concat","status","powerOutput","connectorType","length","group","featureGroup","fitBounds","getBounds","pad","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","dispatch","a","remove"],"sources":["C:\\Users\\HARSH\\Desktop\\code\\frontend\\src\\views\\Map.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-container\" ref=\"mapContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport L from 'leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\n\r\n// Fix Leaflet default icon issue\r\ndelete L.Icon.Default.prototype._getIconUrl\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n})\r\n\r\nexport default {\r\n  name: 'Map',\r\n  setup() {\r\n    const store = useStore()\r\n    const mapContainer = ref(null)\r\n    const map = ref(null)\r\n    const markers = ref([])\r\n    \r\n    const chargers = computed(() => store.getters.getChargers)\r\n\r\n    const initMap = () => {\r\n      if (!mapContainer.value) return\r\n\r\n      // Initialize map\r\n      map.value = L.map(mapContainer.value).setView([0, 0], 2)\r\n\r\n      // Add tile layer\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '© OpenStreetMap contributors'\r\n      }).addTo(map.value)\r\n\r\n      // Add markers for each charger\r\n      markers.value = chargers.value.map(charger => {\r\n        const marker = L.marker([charger.location.latitude, charger.location.longitude])\r\n          .addTo(map.value)\r\n          .bindPopup(`\r\n            <h3>${charger.name}</h3>\r\n            <p><strong>Status:</strong> ${charger.status}</p>\r\n            <p><strong>Power Output:</strong> ${charger.powerOutput} kW</p>\r\n            <p><strong>Connector Type:</strong> ${charger.connectorType}</p>\r\n          `)\r\n        return marker\r\n      })\r\n\r\n      // Fit map bounds to show all markers\r\n      if (markers.value.length > 0) {\r\n        const group = new L.featureGroup(markers.value)\r\n        map.value.fitBounds(group.getBounds().pad(0.1))\r\n      }\r\n    }\r\n\r\n    onMounted(async () => {\r\n      await store.dispatch('fetchChargers')\r\n      initMap()\r\n    })\r\n\r\n    onUnmounted(() => {\r\n      if (map.value) {\r\n        map.value.remove()\r\n      }\r\n    })\r\n\r\n    return {\r\n      mapContainer\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.map-container {\r\n  height: calc(100vh - 64px);\r\n  width: 100%;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}